version: 0.2

phases:
  pre_build:
    commands:
      - dotnet nuget locals --clear all
      - dotnet restore ./API/API.csproj
      - dotnet restore ./Model/Model.csproj
      - dotnet restore ./Persistence/Persistence.csproj
  build:
    commands:
      - dotnet build NoNameApp.sln
      - dotnet publish -c release -o ./build_output NoNameApp/API/API.csproj
  post_build:
    commands:
      - cp aws-windows-deployment-manifest.json ./build_output/.
artifacts:
  files:
    - '**/*'
  base-directory: build_output